<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>GTM Revenue & Activity Calculator</title>

  <!-- Fonts + Vention-ish chrome -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
  <style>
    :root{
      --charcoal:#1f2937;
      --charcoal-2:#111827;
      --orange:#f97316;
      --line:#e5e7eb;
      --bg:#f6f7f9;
      --ink:#0f172a;
      --muted:#6b7280;
      --card:#ffffff;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0;background:var(--bg);color:var(--ink);
         font-family:Inter,system-ui,Segoe UI,Roboto,Helvetica,Arial,sans-serif}

    header.page{background:linear-gradient(180deg,var(--charcoal),var(--charcoal-2));color:#fff;padding:18px 20px}
    header.page h1{margin:0;font-weight:800;font-size:24px;line-height:1.2}
    header.page p{margin:6px 0 0 0;opacity:.9}

    .container{max-width:1200px;margin:18px auto;padding:0 16px}
    .section{
      background:var(--card);border:1px solid var(--line);border-radius:14px;
      padding:16px 18px;margin:14px 0;box-shadow:0 1px 2px rgba(0,0,0,.03)
    }
    .section h2{margin:0 0 10px;font-size:18px;font-weight:700}
    .row{display:flex;flex-wrap:wrap;gap:12px}
    .grid-3{display:grid;grid-template-columns:1fr;gap:14px}
    @media(min-width:900px){ .grid-3{grid-template-columns:repeat(3,1fr)} }

    label{display:block;font-size:13px;font-weight:600;margin-bottom:6px}
    input[type="number"], input[type="text"], select{
      width:100%;max-width:260px;background:#fff;border:1px solid var(--line);
      border-radius:10px;padding:8px 10px;font-size:14px;outline:none
    }
    input:focus, select:focus{box-shadow:0 0 0 3px rgba(249,115,22,.15);border-color:#f59e0b}

    .kpis{display:grid;grid-template-columns:repeat(2,1fr);gap:10px;margin-bottom:10px}
    @media(min-width:1000px){ .kpis{grid-template-columns:repeat(5,1fr)} }
    .kpi{background:#f9fafb;border:1px solid var(--line);border-radius:12px;padding:12px}
    .kpi .label{color:var(--muted);font-size:12px}
    .kpi .value{font-weight:700;font-size:18px;margin-top:4px}

    .table-wrap{overflow-x:auto;border:1px solid var(--line);border-radius:12px;background:#fff}
    table{border-collapse:collapse;width:100%;min-width:760px}
    th,td{border-top:1px solid var(--line);padding:10px 8px;font-size:13px;vertical-align:middle}
    thead th{position:sticky;top:0;background:#f9fafb;z-index:1}
    tbody tr:nth-child(2n){background:#fcfcfd}
    td:first-child{font-weight:600;white-space:nowrap}
    .subhead{font-size:11px;letter-spacing:.06em;text-transform:uppercase;color:#334155;
             background:#eef2ff;border-top:1px solid #e0e7ff}
    .subhead.em{background:#ecfdf5;border-top:1px solid #d1fae5}
    .subhead.total{background:#f3f4f6;border-top:1px solid #e5e7eb}

    .hire-grid input{width:72px;text-align:right}

    .note{color:var(--muted);font-size:12px;margin-top:6px}
    .mode{display:flex;align-items:center;gap:8px}
    .mode label{margin:0}
    .pill{display:inline-flex;align-items:center;gap:6px;background:#fff;border:1px solid var(--line);
          padding:6px 10px;border-radius:999px;font-size:12px}
    .pill strong{color:var(--orange)}
  </style>

  <!-- React 18 UMD + Babel (client-side JSX) -->
  <script src="https://unpkg.com/react@18/umd/react.production.min.js" crossorigin></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js" crossorigin></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
</head>
<body>
  <header class="page">
    <div class="container">
      <h1>GTM Revenue & Activity Calculator</h1>
      <p>Fintech &amp; Healthcare · AE full-cycle · Ramp + sales cycle · Bilateral planning</p>
    </div>
  </header>

  <div id="root" class="container"></div>

  <script type="text/babel">
    const { useMemo, useState } = React;

    /* helpers */
    const clamp = (n, lo, hi) => Math.max(lo, Math.min(hi, n));
    const fmtMoney = (n) => (Number(n)||0).toLocaleString(undefined,{style:"currency",currency:"USD",maximumFractionDigits:0});
    const fmtInt = (n) => Math.round(Number(n)||0).toLocaleString();

    function Section({ title, children }) {
      return (
        <div className="section">
          <h2>{title}</h2>
          {children}
        </div>
      );
    }

    function GTMCalculator() {
      const [mode, setMode] = useState("headcount");
      const [horizon, setHorizon] = useState(12);

      const [quotaPerAEAnnual, setQuotaPerAEAnnual] = useState(1_000_000);
      const [attainmentPct, setAttainmentPct] = useState(85);
      const [avgDealSize, setAvgDealSize] = useState(200_000);
      const [conversionPct, setConversionPct] = useState(1);
      const [salesCycleMonths, setSalesCycleMonths] = useState(5);

      const [capacityDriver, setCapacityDriver] = useState("quota");
      const [actualAccountsPerAEMonth, setActualAccountsPerAEMonth] = useState(42);

      const [startingAEs, setStartingAEs] = useState(4);
      const [inheritedAttainmentPct, setInheritedAttainmentPct] = useState(50);

      const [hirePlan, setHirePlan] = useState(() => { const arr = new Array(24).fill(0); arr[4]=2; arr[8]=2; return arr; });

      const [newHireRampMonths, setNewHireRampMonths] = useState(1);
      const rampForMonthIndex = (idx) => {
        if (newHireRampMonths === 1) return idx === 1 ? 0.5 : 1;
        if (newHireRampMonths === 2) return idx === 1 ? 0.5 : (idx === 2 ? 0.75 : 1);
        return idx === 1 ? 0.33 : (idx === 2 ? 0.66 : 1);
      };

      const [targetRevenue, setTargetRevenue] = useState(8_000_000);

      const monthlyQuotaFull = quotaPerAEAnnual / 12;
      const attainment = clamp(attainmentPct/100, 0, 2);
      const inheritedPct = clamp(inheritedAttainmentPct/100, 0, 2);

      const months = useMemo(() => Array.from({length:horizon}, (_,i)=>`M${i+1}`), [horizon]);
      const normalizedHirePlan = useMemo(() => {
        const arr = new Array(horizon).fill(0);
        for (let i=0;i<Math.min(hirePlan.length,horizon);i++) arr[i]=hirePlan[i]||0;
        return arr;
      }, [hirePlan,horizon]);

      function simulate(hiresByMonth, recognitionStyle) {
        const monthlyRevenue = new Array(horizon).fill(0);
        const monthlyRevenueStart = new Array(horizon).fill(0);
        const monthlyRevenueHires = new Array(horizon).fill(0);
        const totalAEsByMonth = new Array(horizon).fill(0);

        for (let m=0;m<horizon;m++){
          totalAEsByMonth[m] = startingAEs + hiresByMonth.slice(0,m+1).reduce((a,b)=>a+b,0);
          monthlyRevenueStart[m] = startingAEs * monthlyQuotaFull * inheritedPct;
        }

        if (recognitionStyle==="headcount"){
          const startOffset = newHireRampMonths + salesCycleMonths;
          const monthsRecognized = Math.max(1, 12 - startOffset);
          const perAEPerMonth = (quotaPerAEAnnual * attainment) / monthsRecognized;

          for (let h=0; h<horizon; h++){
            const hired = hiresByMonth[h]||0; if(!hired) continue;
            const startIdx = h + startOffset - 1;
            const endIdx = Math.min(h + 11, horizon-1);
            for (let m=startIdx; m<=endIdx; m++){
              if (m>=0 && m<horizon) monthlyRevenueHires[m] += hired * perAEPerMonth;
            }
          }
        } else {
          const monthlyCapacityHires = new Array(horizon).fill(0);
          for (let m=0;m<horizon;m++){
            let cap=0;
            for (let h=0; h<=m; h++){
              const hired = hiresByMonth[h]||0; if(!hired) continue;
              const idx = m - h + 1;
              const ramp = rampForMonthIndex(idx);
              if (capacityDriver==="quota") cap += hired * monthlyQuotaFull * attainment * ramp;
              else {
                const conv=0.01, avg=avgDealSize, acts=actualAccountsPerAEMonth * ramp;
                cap += hired * acts * avg * conv;
              }
            }
            monthlyCapacityHires[m]=cap;
          }
          for (let m=0;m<horizon;m++){
            const lagIdx = m - salesCycleMonths;
            monthlyRevenueHires[m] = lagIdx>=0 ? monthlyCapacityHires[lagIdx] : 0;
          }
        }

        for (let m=0;m<horizon;m++){
          monthlyRevenue[m] = monthlyRevenueStart[m] + monthlyRevenueHires[m];
        }

        return {
          monthlyRevenue, monthlyRevenueStart, monthlyRevenueHires, totalAEsByMonth,
          totals:{
            totalRevenue: monthlyRevenue.reduce((a,b)=>a+b,0),
            totalRevenueStart: monthlyRevenueStart.reduce((a,b)=>a+b,0),
            totalRevenueHires: monthlyRevenueHires.reduce((a,b)=>a+b,0),
            finalAECount: totalAEsByMonth[horizon-1]||startingAEs,
          }
        };
      }

      const headcountSim = useMemo(
        () => simulate(normalizedHirePlan,"headcount"),
        [normalizedHirePlan,horizon,startingAEs,monthlyQuotaFull,inheritedPct,quotaPerAEAnnual,attainment,newHireRampMonths,salesCycleMonths]
      );

      const revenueDrivenPlan = useMemo(() => {
        const maxHires=2000; let lo=0, hi=maxHires;
        let best={hires:0, sim:simulate(new Array(horizon).fill(0),"generic")};
        while (lo<=hi){
          const mid=Math.floor((lo+hi)/2);
          const plan=new Array(horizon).fill(0); plan[0]=mid;
          const sim=simulate(plan,"generic"); best={hires:mid, sim};
          const total=sim.totals.totalRevenue;
          if (Math.abs(total-targetRevenue) <= Math.max(1, targetRevenue*0.01)) break;
          if (total<targetRevenue) lo=mid+1; else hi=mid-1;
        }
        const planSuggestion=new Array(horizon).fill(0); planSuggestion[0]=best.hires;
        return {neededAEs: startingAEs+best.hires, planSuggestion, sim:best.sim};
      }, [targetRevenue,startingAEs,horizon,monthlyQuotaFull,attainment,capacityDriver,actualAccountsPerAEMonth,avgDealSize,newHireRampMonths,salesCycleMonths]);

      return (
        <div>
          <Section
            title={
              <div className="mode">
                <span style={{ fontWeight: 700 }}>Mode</span>
                <select value={mode} onChange={(e)=>setMode(e.target.value)}>
                  <option value="headcount">Headcount-driven</option>
                  <option value="revenue">Revenue-driven</option>
                </select>
                <span className="pill"><strong>Tip</strong> change mode to see both flows</span>
              </div>
            }
          />

          <Section title="Global Inputs">
            <div className="grid-3">
              <div>
                <label>Horizon (months)</label>
                <input type="number" min="6" max="36" value={horizon}
                  onChange={(e)=>setHorizon(clamp(Number(e.target.value)||0,6,36))}/>
              </div>
              <div>
                <label>Quota per AE (annual)</label>
                <input type="number" value={quotaPerAEAnnual}
                  onChange={(e)=>setQuotaPerAEAnnual(Number(e.target.value)||0)}/>
              </div>
              <div>
                <label>Quota Attainment (%)</label>
                <input type="number" min="0" max="150" value={attainmentPct}
                  onChange={(e)=>setAttainmentPct(clamp(Number(e.target.value)||0,0,150))}/>
              </div>
              <div>
                <label>Avg Deal Size</label>
                <input type="number" value={avgDealSize}
                  onChange={(e)=>setAvgDealSize(Number(e.target.value)||0)}/>
              </div>
              <div>
                <label>Sales Cycle (months)</label>
                <input type="number" min="1" max="12" value={salesCycleMonths}
                  onChange={(e)=>setSalesCycleMonths(clamp(Number(e.target.value)||0,1,12))}/>
                <div className="note">Impacts both Headcount and Revenue-driven forecasts.</div>
              </div>
              <div>
                <label>Inherited Team Productivity (%)</label>
                <input type="number" min="0" max="150" value={inheritedAttainmentPct}
                  onChange={(e)=>setInheritedAttainmentPct(clamp(Number(e.target.value)||0,0,150))}/>
                <div className="note">Recognized immediately each month (no lag).</div>
              </div>
            </div>

            <div className="grid-3" style={{ marginTop: 12 }}>
              <div>
                <label>Capacity Driver</label>
                <select value={capacityDriver} onChange={(e)=>setCapacityDriver(e.target.value)}>
                  <option value="quota">Quota-driven (top-down)</option>
                  <option value="accounts">Accounts-driven (bottom-up)</option>
                </select>
              </div>
              <div>
                <label>Actual Accounts / AE / month</label>
                <input type="number" min="0" value={actualAccountsPerAEMonth}
                  onChange={(e)=>setActualAccountsPerAEMonth(Math.max(0,Number(e.target.value)||0))}/>
                <div className="note">Used in revenue-driven mode.</div>
              </div>
            </div>
          </Section>

          {mode==="headcount" && (
            <>
              <Section title="Headcount-Driven Inputs">
                <div className="grid-3">
                  <div>
                    <label>Starting AEs (inherited)</label>
                    <input type="number" min="0" value={startingAEs}
                      onChange={(e)=>setStartingAEs(Math.max(0,Number(e.target.value)||0))}/>
                  </div>
                  <div style={{ gridColumn: "1 / -1" }}>
                    <label>Monthly Hires (editable grid)</label>
                    <div className="table-wrap">
                      <table className="hire-grid">
                        <thead>
                          <tr>
                            {months.map((m)=><th key={m} style={{ textAlign:"center" }}>{m}</th>)}
                          </tr>
                        </thead>
                        <tbody>
                          <tr>
                            {months.map((m,i)=>(
                              <td key={m} style={{ textAlign:"center" }}>
                                <input
                                  type="number" min="0" value={normalizedHirePlan[i]}
                                  onChange={(e)=>{const next=[...normalizedHirePlan]; next[i]=Math.max(0,Number(e.target.value)||0); setHirePlan(next);}}
                                />
                              </td>
                            ))}
                          </tr>
                        </tbody>
                      </table>
                    </div>
                    <div className="note">Values are hires added in that month.</div>
                  </div>
                </div>
              </Section>

              <Section title="Headcount Forecast (recognition starts after Ramp + Sales Cycle)">
                <div className="kpis">
                  <div className="kpi"><div className="label">Final AE Count</div><div className="value">{fmtInt(headcountSim.totals.finalAECount)}</div></div>
                  <div className="kpi"><div className="label">Revenue — Inherited</div><div className="value">{fmtMoney(headcountSim.totals.totalRevenueStart)}</div></div>
                  <div className="kpi"><div className="label">Revenue — New Hires</div><div className="value">{fmtMoney(headcountSim.totals.totalRevenueHires)}</div></div>
                  <div className="kpi"><div className="label">Revenue — Total</div><div className="value">{fmtMoney(headcountSim.totals.totalRevenue)}</div></div>
                  <div className="kpi"><div className="label">Start Offset</div><div className="value">{newHireRampMonths + salesCycleMonths} mo</div></div>
                </div>

                <div className="table-wrap">
                  <table>
                    <thead>
                      <tr>
                        <th>Month</th>
                        {months.map((m)=><th key={m} style={{ textAlign:"right" }}>{m}</th>)}
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td>AEs (end of month)</td>
                        {headcountSim.totalAEsByMonth.map((v,i)=><td key={i} style={{ textAlign:"right" }}>{fmtInt(v)}</td>)}
                      </tr>

                      <tr><td className="subhead" colSpan={months.length+1}>Inherited Team</td></tr>
                      <tr>
                        <td>Revenue — Inherited (recognized)</td>
                        {headcountSim.monthlyRevenueStart.map((v,i)=><td key={i} style={{ textAlign:"right" }}>{fmtMoney(v)}</td>)}
                      </tr>

                      <tr><td className="subhead em" colSpan={months.length+1}>New Hires</td></tr>
                      <tr>
                        <td>Revenue — New Hires (recognized)</td>
                        {headcountSim.monthlyRevenueHires.map((v,i)=><td key={i} style={{ textAlign:"right" }}>{fmtMoney(v)}</td>)}
                      </tr>

                      <tr><td className="subhead total" colSpan={months.length+1}>Totals</td></tr>
                      <tr>
                        <td>Revenue — Total (recognized)</td>
                        {headcountSim.monthlyRevenue.map((v,i)=><td key={i} style={{ textAlign:"right" }}>{fmtMoney(v)}</td>)}
                      </tr>
                    </tbody>
                  </table>
                </div>
              </Section>
            </>
          )}

          {mode==="revenue" && (
            <>
              <Section title="Revenue-Driven Inputs">
                <div className="grid-3">
                  <div>
                    <label>Starting AEs (inherited)</label>
                    <input type="number" min="0" value={startingAEs}
                      onChange={(e)=>setStartingAEs(Math.max(0,Number(e.target.value)||0))}/>
                  </div>
                  <div>
                    <label>Target Revenue (over horizon)</label>
                    <input type="number" min="0" value={targetRevenue}
                      onChange={(e)=>setTargetRevenue(Math.max(0,Number(e.target.value)||0))}/>
                  </div>
                  <div>
                    <label>Capacity Driver</label>
                    <select value={capacityDriver} onChange={(e)=>setCapacityDriver(e.target.value)}>
                      <option value="quota">Quota-driven</option>
                      <option value="accounts">Accounts-driven</option>
                    </select>
                  </div>
                  <div>
                    <label>Sales Cycle (months)</label>
                    <input type="number" min="1" max="12" value={salesCycleMonths}
                      onChange={(e)=>setSalesCycleMonths(clamp(Number(e.target.value)||0,1,12))}/>
                  </div>
                  <div>
                    <label>New Hire Ramp Length (months)</label>
                    <select value={newHireRampMonths} onChange={(e)=>setNewHireRampMonths(Number(e.target.value))}>
                      <option value="1">1 month (50% → 100%)</option>
                      <option value="2">2 months (50% → 75% → 100%)</option>
                      <option value="3">3 months (33% → 66% → 100%)</option>
                    </select>
                  </div>
                </div>
              </Section>

              <Section title="Suggested Plan & Forecast">
                <div className="kpis">
                  <div className="kpi"><div className="label">Estimated AEs Needed</div><div className="value">{fmtInt(revenueDrivenPlan.neededAEs)}</div></div>
                  <div className="kpi"><div className="label">Suggested Hires (M1)</div><div className="value">{fmtInt(revenueDrivenPlan.planSuggestion[0])}</div></div>
                  <div className="kpi"><div className="label">Forecast Revenue (recognized)</div><div className="value">{fmtMoney(revenueDrivenPlan.sim.totals.totalRevenue)}</div></div>
                  <div className="kpi"><div className="label">Start Offset</div><div className="value">{newHireRampMonths + salesCycleMonths} mo</div></div>
                </div>

                <div className="table-wrap">
                  <table>
                    <thead>
                      <tr>
                        <th>Month</th>
                        {months.map((m)=><th key={m} style={{ textAlign:"right" }}>{m}</th>)}
                      </tr>
                    </thead>
                    <tbody>
                      <tr><td className="subhead" colSpan={months.length+1}>Breakout: Inherited vs New Hires</td></tr>
                      <tr>
                        <td>Revenue — Inherited (recognized)</td>
                        {revenueDrivenPlan.sim.monthlyRevenueStart.map((v,i)=><td key={i} style={{ textAlign:"right" }}>{fmtMoney(v)}</td>)}
                      </tr>
                      <tr>
                        <td>Revenue — New Hires (recognized)</td>
                        {revenueDrivenPlan.sim.monthlyRevenueHires.map((v,i)=><td key={i} style={{ textAlign:"right" }}>{fmtMoney(v)}</td>)}
                      </tr>
                      <tr>
                        <td>Revenue — Total (recognized)</td>
                        {revenueDrivenPlan.sim.monthlyRevenue.map((v,i)=><td key={i} style={{ textAlign:"right" }}>{fmtMoney(v)}</td>)}
                      </tr>
                    </tbody>
                  </table>
                </div>
              </Section>
            </>
          )}
        </div>
      );
    }

    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<GTMCalculator />);
  </script>
</body>
</html>
